<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>manifold-surface-generator</title>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "three/examples/jsm/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app">
      <div id="canvas-container"></div>
      <div id="overlay-panel" class="panel">
        <h3>Manifold Surface Generator</h3>
        <details open>
          <summary>Surface</summary>
          <div class="row">
            <label>Preset</label>
            <select id="preset">
              <option value="ripple">Ripple Patch</option>
              <option value="saddle">Saddle</option>
              <option value="paraboloid">Paraboloid</option>
              <option value="swiss">Swiss Roll</option>
              <option value="bumps">Gaussian Bumps</option>
              <option value="interference">Interference Waves</option>
              <option value="ridged">Ridged Sheet</option>
              <option value="mountains">Mountains</option>
              <option value="gyroid">Gyroid Sheet</option>
              <option value="folds">Folds</option>
              <option value="twist">Twisted Waves</option>
              <option value="checker">Checker Bumps</option>
            </select>
          </div>
          <div class="row">
            <label>Dash</label>
            <input id="geoDash" type="range" min="0.01" max="0.6" step="0.01" value="0.14" />
            <label style="width:50px">Gap</label>
            <input id="geoGap" type="range" min="0.01" max="0.6" step="0.01" value="0.06" />
          </div>
          <div class="row">
            <label>Resolution</label>
            <input id="resU" type="number" min="8" max="512" step="1" value="80" /> ×
            <input id="resV" type="number" min="8" max="512" step="1" value="60" />
          </div>
          <div class="row">
            <label>Scale</label>
            <input id="scale" type="range" min="0.5" max="3" step="0.1" value="1" />
          </div>
          <div id="presetParams" class="column"></div>
          <details>
            <summary>Mask</summary>
            <div class="row">
              <label>Mode</label>
              <select id="clipMode">
                <option value="none">None</option>
                <option value="rect">Rect</option>
                <option value="circle">Circle</option>
              </select>
            </div>
            <div id="clipRect" class="row" style="display:none;">
              <label>Rect W×H</label>
              <input id="clipRectW" type="range" min="0.1" max="2.5" step="0.01" value="1.6" /> ×
              <input id="clipRectH" type="range" min="0.1" max="2.5" step="0.01" value="1.2" />
            </div>
            <div id="clipCircle" class="row" style="display:none;">
              <label>Radius</label>
              <input id="clipRadius" type="range" min="0.1" max="2.0" step="0.01" value="0.9" />
            </div>
            <div class="row">
              <label>Show Lines</label>
              <input id="clipLinesEnable" type="checkbox" checked />
            </div>
            <div class="row">
              <label>Width</label>
              <input id="clipWidth" type="range" min="0.5" max="8" step="0.1" value="2" />
            </div>
            <div class="row">
              <label>Style</label>
              <select id="clipStyle">
                <option value="solid" selected>Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
              </select>
            </div>
            <div class="row">
              <label>Style Dash</label>
              <input id="clipDash" type="range" min="0.01" max="0.6" step="0.01" value="0.14" />
            </div>
            <div class="row">
              <label>Style Gap</label>
              <input id="clipGap" type="range" min="0.01" max="0.6" step="0.01" value="0.06" />
            </div>
            <div class="row">
              <label>Color</label>
              <input id="clipColor" type="color" value="#000000" />
              <span style="flex:1"></span>
              <label style="width:70px">Alpha</label>
              <input id="clipAlpha" type="range" min="0" max="1" step="0.05" value="1" />
            </div>
          </details>
          <div class="row">
            <label>Wireframe</label>
            <input id="wireframe" type="checkbox" />
          </div>
        </details>

        <details open>
          <summary>Colors</summary>
          <div class="row">
            <label>Background</label>
            <input id="bgColor" type="color" value="#f5f5f8" />
            <span style="flex:1"></span>
            <label style="width:70px">Alpha</label>
            <input id="bgAlpha" type="range" min="0" max="1" step="0.01" value="1" />
          </div>
          <div class="row">
            <label>Color Mode</label>
            <select id="colorMode">
              <option value="solid">Solid</option>
              <option value="gradient">Gradient</option>
            </select>
          </div>
          <div id="solidRow" class="row">
            <label>Surface</label>
            <input id="solidColor" type="color" value="#a8c7ff" />
          </div>
          <div class="row">
            <label>Opacity</label>
            <input id="surfaceOpacity" type="range" min="0" max="1" step="0.01" value="1" />
          </div>
          <div id="gradientEditor" class="column" style="display:none;">
            <div class="row">
              <label>Axis</label>
              <select id="gradAxis">
                <option value="u">U</option>
                <option value="v">V</option>
                <option value="height">Height</option>
              </select>
            </div>
            <div id="stops"></div>
            <button id="addStop">Add Stop</button>
          </div>
        </details>

        <details open>
          <summary>Geodesics</summary>
          <div class="row">
            <label>Enable</label>
            <input id="geoEnable" type="checkbox" checked />
          </div>
          <div class="row">
            <label>Method</label>
            <select id="geoMethod">
              <option value="grid">Iso-Grid</option>
              <option value="edge-shortest">Edge Shortest Path</option>
              <option value="param-straight">Param Straight</option>
            </select>
          </div>
          <div class="row">
            <label>Count</label>
            <input id="geoCount" type="number" min="1" max="50" step="1" value="8" />
          </div>
          <div class="row">
            <label>Width</label>
            <input id="geoWidth" type="range" min="0.5" max="8" step="0.1" value="2" />
          </div>
          <div class="row">
            <label>Style</label>
            <select id="geoStyle">
              <option value="solid">Solid</option>
              <option value="dashed">Dashed</option>
              <option value="dotted">Dotted</option>
            </select>
          </div>
          <div class="row">
            <label>Style Dash</label>
            <input id="geoDash" type="range" min="0.01" max="0.6" step="0.01" value="0.14" />
          </div>
          <div class="row">
            <label>Style Gap</label>
            <input id="geoGap" type="range" min="0.01" max="0.6" step="0.01" value="0.06" />
          </div>
          <div class="row">
            <label>Color</label>
            <input id="geoColor" type="color" value="#333333" />
            <span style="flex:1"></span>
            <label style="width:70px">Alpha</label>
            <input id="geoAlpha" type="range" min="0" max="1" step="0.05" value="1" />
          </div>
          <div class="row">
            <button id="pickStart">Pick Start</button>
            <button id="pickEnd">Pick End</button>
            <button id="addPath">Add Path</button>
          </div>
          <div class="row">
            <button id="clearGeodesics">Clear Geodesics</button>
          </div>
        </details>

        <details>
          <summary>Markers</summary>
          <div class="row">
            <label>Enable</label>
            <input id="markersEnable" type="checkbox" checked />
          </div>
          <div class="row">
            <label>Shape</label>
            <select id="markerShape">
              <option value="circle">Circle</option>
              <option value="triangle">Triangle</option>
              <option value="square">Square</option>
              <option value="pentagon">Pentagon</option>
            </select>
          </div>
          <div class="row">
            <label>Size</label>
            <input id="markerSize" type="range" min="6" max="40" step="1" value="14" />
          </div>
          <div class="row">
            <label>Color</label>
            <input id="markerColor" type="color" value="#e53935" />
            <span style="flex:1"></span>
            <label style="width:70px">Alpha</label>
            <input id="markerAlpha" type="range" min="0" max="1" step="0.05" value="1" />
          </div>
          <div class="row">
            <button id="clearMarkers">Clear Markers</button>
          </div>
        </details>

        <details open>
          <summary>Export</summary>
          <div class="row">
            <button id="savePng">Save PNG</button>
            <button id="exportGLB">Export GLB</button>
            <button id="exportOBJ">Export OBJ</button>
            <button id="resetCamera">Reset Camera</button>
          </div>
        </details>
        <div class="row" style="margin-top:8px;justify-content:flex-end;">
          <button id="resetAll">Reset All</button>
        </div>
      </div>
      <div id="marker-layer" class="marker-layer"></div>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
  </html>
